<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Qiscus  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Qiscus  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          Qiscus Docs
        </a>
         (45% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/qiscus/qiscus-sdk-ios">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Fgithub%2Ecom%2Fqiscus%2Fqiscus%2Dsdk%2Dios%2Fdocsets%2FQiscus%2Exml">
            <img class="header-icon" src="img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">Qiscus Reference</a>
      <img class="carat" src="img/carat.png" />
      Qiscus  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Qiscus.html">Qiscus</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/QiscusAssetsConfiguration.html">QiscusAssetsConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/QiscusColorConfiguration.html">QiscusColorConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/QiscusConfig.html">QiscusConfig</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/QiscusTextConfiguration.html">QiscusTextConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/QiscusUIConfiguration.html">QiscusUIConfiguration</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <h1 id='qiscus-sdk-ios' class='heading'>Qiscus SDK iOS</h1>

<p align="center"><br/><img src="https://res.cloudinary.com/qiscus/image/upload/zKB8jtyLZJ/ssios1.png" width="45%" /><br/></p>
<h1 id='quick-start' class='heading'>Quick Start</h1>
<h3 id='create-a-new-app' class='heading'>Create a new app</h3>

<p>Register on <a href="https://www.qiscus.com/dashboard">https://www.qiscus.com/dashboard</a> using your email and password and then create new application</p>

<p>You should create one application per service, regardless of the platform. For example, an app released in both Android and iOS would require only one application to be created in the Dashboard.</p>

<p>All users within the same Qiscus application are able to communicate with each other, across all platforms. This means users using iOS, Android, web clients, etc. can all chat with one another. However, users in different Qiscus applications cannot talk to each other.</p>

<p>Done! Now you can use the APP_ID into your apps and get chat functionality by implementing Qiscus into your app.</p>
<h3 id='integrating-sdk-with-an-existing-app' class='heading'>integrating SDK with an existing app</h3>

<p><a href="http://cocoapods.org/">CocoaPods</a> is a dependency manager for Cocoa projects. You can install it with the following command:</p>
<pre class="highlight plaintext"><code>$ gem install cocoapods
</code></pre>

<blockquote>
<p>CocoaPods 1.1.0+ is required.</p>
</blockquote>

<p>Podfile :</p>
<pre class="highlight plaintext"><code>target 'Sample' do

  .....
  use_frameworks!

  .....
  pod 'Qiscus'
  .....

end

</code></pre>

<p>Install Qiscus through CocoaPods</p>
<pre class="highlight plaintext"><code>$ pod install
</code></pre>
<h1 id='authentication' class='heading'>Authentication</h1>
<h3 id='init-with-app-id' class='heading'>Init with App ID</h3>

<p>To initiate Qiscus SDK, you need to import Qiscus and then add this in your code everywhere you want</p>

<p><strong>Swift 3.0:</strong></p>
<pre class="highlight plaintext"><code>import Qiscus


Qiscus.setup( withAppId: YOUR_APP_ID, 
              userEmail: CURRENT_USER_EMAIL, 
              userKey: CURRENT_USER_PASSWORD, 
              username: CURRENT_USER_USERNAME, 
              avatarURL: CURRENT_USER_AVATAR_URL, 
              delegate: self
)
</code></pre>

<p><strong>Using the  SDK in Objective-C</strong></p>
<pre class="highlight plaintext"><code>import Qiscus

[Qiscus setupWithAppId:&lt;YOUR_APP_ID&gt; 
        userEmail:&lt;USER_EMAIL&gt; 
        userKey:&lt;USER_KEY&gt; 
        username:&lt;USER_NAME&gt; 
        avatarURL:&lt;USER_AVATAR_URL&gt; 
        delegate:self 
        secureURl:&lt;true|false&gt;];
</code></pre>

<p><strong>Example on AppDelegate.swift</strong></p>
<pre class="highlight plaintext"><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {
        let viewController = ViewController()
        let navigationController = UINavigationController(rootViewController: viewController)

        Qiscus.setup( withAppId: "DragonGo",
                      userEmail: "abcde@qiscus.coom",
                      userKey: "abcd1234",
                      username: "Steve Kusuma",
                      avatarURL: "",
                      delegate: nil
        )

        self.window = UIWindow(frame: UIScreen.main.bounds)
        window?.rootViewController = navigationController
        window?.makeKeyAndVisible()

        return true
}
</code></pre>
<h3 id='updating-a-user-profile-and-avatar' class='heading'>Updating a User Profile and Avatar</h3>

<p>Updating user profile and details is simply by re-init the user using new details :</p>
<pre class="highlight plaintext"><code>        Qiscus.setup( withAppId: "DragonGo",
                      userEmail: "abcde@qiscus.coom",
                      userKey: "abcd1234",
                      username: "Steve Kusuma New Name",
                      avatarURL: "https://myimage.com/myNewImage.png",
                      delegate: nil
        )
</code></pre>
<h1 id='chat-rooms' class='heading'>Chat Rooms</h1>
<h3 id='creating-1-to-1-chat' class='heading'>Creating 1-to-1 chat</h3>

<p>Start chat with target is very easy, all you need is just call</p>

<p>Swift 3.0 :</p>
<pre class="highlight plaintext"><code>      let email = targetField.text!
      let view = Qiscus.chatView(withUsers: [email])
      self.navigationController?.pushViewController(view, animated: true)
</code></pre>

<p>in your code</p>

<p>For example in your ViewController :</p>

<p>Swift 3.0:</p>
<pre class="highlight plaintext"><code>import UIKit
import Qiscus

class ViewController: UIViewController {

.....

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.
        let button = UIButton(frame: CGRect(x: 100, y:100, width:100, height:30))
        button.backgroundColor = UIColor.green
        button.setTitle("Start Chat", for: .normal)
        button.addTarget(self, action: #selector(ViewController.startChat), for: .touchUpInside)
        self.view.addSubview(button)

    }

    func startChat(){
        let email = targetField.text!
        let view = Qiscus.chatView(withUsers: [email])
        self.navigationController?.pushViewController(view, animated: true)
    }

.....
}
</code></pre>
<h3 id='creating-a-group-room' class='heading'>Creating a Group Room</h3>

<p>Qiscus also support group chat. To create new group chat, all you need is just call</p>

<p>Swift 3.0:</p>

<p><code>Qiscus.createChatView(withUsers: [&quot;TARGET_EMAIL_1, TARGET_EMAIL_2&quot;], title: &quot;CHAT_GROUP_TITLE&quot;)</code></p>

<p>For example in your ViewController :</p>

<p>Swift 3.0</p>
<pre class="highlight plaintext"><code>import UIKit
import Qiscus

class ViewController: UIViewController {

    .....
    func goToChat(){
        let chatTargets = ["081111111111@qiscuswa.com, 081234567890@qiscuswa.com"]
        let view = Qiscus.createChatView(withUsers: chatTargets, title: "New Group Chat")
        self.navigationController?.pushViewController(view, animated: true)
    }
    .....
}
</code></pre>

<p>for accesing room that created by this call, you need to call it with its roomId. This methode is always creating new chat room.</p>
<h3 id='get-a-room-by-id' class='heading'>Get a room by id</h3>

<p>When you already know your chat room id, you can easily go to that room. Just call</p>

<p>Swift 3.0:</p>

<p><code>Qiscus.chatView(withRoomId: roomId)</code></p>

<p>For example in your ViewController :</p>

<p>Swift 3.0</p>
<pre class="highlight plaintext"><code>import UIKit
import Qiscus

class ViewController: UIViewController {

.....

  func goToChat(){
          let roomId = Int(targetField.text!)
          let view = Qiscus.chatView(withRoomId: roomId)
          self.navigationController?.pushViewController(view, animated: true)
  }

.....
}
</code></pre>
<h3 id='create-or-join-room-by-defined-id' class='heading'>Create or join room by defined id</h3>

<p>You probably want to set defined id for the room you are creating so that the id can be reference for users to get into.</p>

<p>Usual usage for this is when user create common room or channel which expecting other users can join to the same channel by knowing the channel name or id, you can use the channel name or id as qiscus room defined id.</p>

<p>Additional note: 
If room with predefined unique id is not exist then it will create a new one with requester as the only one participant. Otherwise, if room with predefined unique id is already exist, it will return that room and add requester as a participant.</p>

<p>When first call (room is not exist), if requester did not send avatar_url and/or room name it will use default value. But, after the second call (room is exist) and user (requester) send avatar_url and/or room name, it will be updated to that value. Object changed will be true in first call and when avatar_url or room name is updated.</p>

<p>Swift 3.0:</p>

<p><code>Qiscus.chatView(withRoomUniqueId: uniqueId)</code></p>

<p>For example in your ViewController :</p>

<p>Swift 3.0</p>
<pre class="highlight plaintext"><code>import UIKit
import Qiscus

class ViewController: UIViewController {

.....

  func goToChat(){
          let roomId = Int(targetField.text!)
          let view = Qiscus.chatView(withRoomUniqueId: uniqueId)
          self.navigationController?.pushViewController(view, animated: true)
  }

.....
}
</code></pre>
<h3 id='inviting-users-to-an-existing-room' class='heading'>Inviting users to an existing Room</h3>

<p>Currently we recommend to invite user into existing room through our <strong>REST API</strong> for simplicity and security reason</p>
<h3 id='leaving-a-group-room' class='heading'>Leaving a Group Room</h3>

<p>Currently we recommend to kick user out of specific room through our <strong>REST API</strong> for simplicity and security reason</p>
<h3 id='get-rooms-list' class='heading'>Get Rooms List</h3>

<p>We can get room list for the user by executing this function, however no <code>view</code> being returned. The function will only return data of the rooms</p>
<pre class="highlight plaintext"><code>QChatService.roomList(withLimit: 100, page: page, onSuccess: { (rooms, totalRoom, currentPage, limit) in
            print("room list: \(rooms)")
        }) { (error) in
            print("\(error)")
        }
</code></pre>
<h1 id='event-handler' class='heading'>Event Handler</h1>

<p><strong>QiscusConfigDelegate</strong></p>
<pre class="highlight plaintext"><code>class MainView: UIViewController, QiscusConfigDelegate {

    // MARK: - QiscusConfigDelegate
    func qiscusFailToConnect(_ withMessage:String){
        print(withMessage)
        ...
    }
    func qiscusConnected(){
        appDelegate.goToChatNavigationView()
        ...
    }
}
</code></pre>

<p><strong>QiscusRoomDelegate</strong></p>
<pre class="highlight plaintext"><code>class SampleAppRealtime: QiscusRoomDelegate {

    // MARK: - Member of QiscusRoomDelegate
    internal func gotNewComment(_ comments: QiscusComment) {
        print("getting new messages")
    }

    internal func didFinishLoadRoom(onRoom room: QiscusRoom) {
        print("did finish load roomId: \(localRoom.roomId), roomName: \(localRoom.roomName)")
    }

    internal func didFailLoadRoom(withError error: String) {
        print("did fail load room error: \(error)")
    }

    func didFinishUpdateRoom(onRoom room: QiscusRoom) {
        print("did finish update room roomId: \(localRoom.roomId), roomName: \(localRoom.roomName)")
    }

    func didFailUpdateRoom(withError error:String) {
        print("did fail update room: \(error)")
    }

}
</code></pre>
<h1 id='ui-customization' class='heading'>UI Customization</h1>
<h3 id='theme-customization' class='heading'>Theme Customization</h3>

<p>Lots of our items inside Chat Room can be modified based on our needs, here is the example of the customisation that can be done easily</p>
<pre class="highlight plaintext"><code>
  let qiscusColor = Qiscus.style.color
  qiscusColor.welcomeIconColor = colorConfig.chatWelcomeIconColor
  qiscusColor.leftBaloonColor = colorConfig.chatLeftBaloonColor
  qiscusColor.leftBaloonTextColor = colorConfig.chatLeftTextColor
  qiscusColor.leftBaloonLinkColor = colorConfig.chatLeftBaloonLinkColor
  qiscusColor.rightBaloonColor = colorConfig.chatRightBaloonColor
  qiscusColor.rightBaloonTextColor = colorConfig.chatRightTextColor

  Qiscus.setNavigationColor(colorConfig.baseNavigateColor, tintColor: colorConfig.baseNavigateTextColor)

  let fontSize: CGFloat = CGFloat(17).flexibleIphoneFont()
  Qiscus.style.chatFont = UIFont.systemFont(ofSize: fontSize)

</code></pre>
<h3 id='ui-source-code' class='heading'>UI Source code</h3>

<p>If you want full customisations, you can modify everything on the view by extend our <code>QiscusChatVC</code> based on your needs.</p>

<p>here is sample of modification by extending our <code>QiscusChatVC</code> :</p>
<pre class="highlight plaintext"><code>class QChatView: QiscusChatVC {
    var actions : [ChatAction]? = nil

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view.
        // self.collectionViewTopMargin.constant = 100
        self.backgroundView.isHidden    = true

        let iconCall        = UIImage(named: "ic_phone_call", in: QChat.bundle, compatibleWith: nil)
        let iconCallVideo   = UIImage(named: "ic_video_call", in: QChat.bundle, compatibleWith: nil)
        let iconEnd         = UIImage(named: "ic_end_consultation", in: QChat.bundle, compatibleWith: nil)

        let endButton = UIButton(frame: CGRect(x: 0, y: 0, width: 40, height: 20))
        endButton.setBackgroundImage(iconEnd, for: .normal)
        endButton.imageView?.contentMode = UIViewContentMode.scaleAspectFit
        endButton.addTarget(self, action: #selector(endConsultation), for: .touchUpInside)
        let barButtonEnd    = UIBarButtonItem(customView: endButton)

        let callButton = UIButton(frame: CGRect(x: 0, y: 0, width: 20, height: 20))
        callButton.setBackgroundImage(iconCall, for: .normal)
        callButton.imageView?.contentMode = UIViewContentMode.scaleAspectFit
        callButton.addTarget(self, action: #selector(addTapped), for: .touchUpInside)
        let barButtonCall    = UIBarButtonItem(customView: callButton)

        let callVideoButton = UIButton(frame: CGRect(x: 0, y: 0, width: 30, height: 20))
        callVideoButton.setBackgroundImage(iconCallVideo, for: .normal)
        callVideoButton.imageView?.contentMode = UIViewContentMode.scaleAspectFit
        callVideoButton.addTarget(self, action: #selector(addTapped), for: .touchUpInside)
        let barButtonCallVideo    = UIBarButtonItem(customView: callVideoButton)

        navigationItem.rightBarButtonItems = [barButtonEnd, barButtonCallVideo, barButtonCall]
    }

    override func viewDidAppear(_ animated: Bool) {
        super.viewDidAppear(animated)
        self.tabBarController?.tabBar.isHidden = true
    }

    func addTapped() {
        print("something")
    }

    func endConsultation() {
        postComment(type: "endConsultation", payload: "Semoga Lekas sembuh")
    }

    func postComment(type: String, payload: String) {
        let newComment = self.chatRoom?.newCustomComment(type: type, payload: payload, text: "Pesan Doktor")
        self.chatRoom?.post(comment: newComment!)
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }

    override func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -&gt; UICollectionViewCell {

        return super.collectionView(collectionView, cellForItemAt: indexPath)
    }
}
</code></pre>
<h1 id='push-notifications' class='heading'>Push Notifications</h1>

<p>Currently we recommend to use our Webhook-API to push notification from your own server to client app for simplicity and flexibility handling</p>
<h1 id='offline-messages' class='heading'>Offline Messages</h1>
<h2 id='post-messages' class='heading'>Post Messages</h2>

<p>During post message, if you dont have any internet connection, message will be store locally and will be automatically being send once your internet connection is back. </p>
<h2 id='get-messages' class='heading'>Get Messages</h2>

<p>Messages are stored locally so you can still access the messages when you dont have internet conenction. However any new messages will not being received after you have your internet connection back.</p>
<h1 id='notes' class='heading'>Notes</h1>

<p>Don&rsquo;t forget to add usage description for camera, photo library and microphone to your **info.plist **to use our attachment functionality in chat SDK</p>
<pre class="highlight plaintext"><code>&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;
&lt;string&gt;Need camera access for uploading Images&lt;/string&gt;
&lt;key&gt;NSContactsUsageDescription&lt;/key&gt;
&lt;string&gt;Need access for sync contact&lt;/string&gt;
&lt;key&gt;NSLocationAlwaysUsageDescription&lt;/key&gt;
&lt;string&gt;$(PRODUCT_NAME) location use&lt;/string&gt;
&lt;key&gt;NSLocationWhenInUseUsageDescription&lt;/key&gt;
&lt;string&gt;$(PRODUCT_NAME) location use&lt;/string&gt;
&lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt;
&lt;string&gt;$(PRODUCT_NAME) microphone use&lt;/string&gt;
&lt;key&gt;NSPhotoLibraryAddUsageDescription&lt;/key&gt;
&lt;string&gt;NeedLibrary access for uploading and Images&lt;/string&gt;
&lt;key&gt;NSPhotoLibraryUsageDescription&lt;/key&gt;
&lt;string&gt;NeedLibrary access for uploading and Images&lt;/string&gt;
</code></pre>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2018 <a class="link" href="http://qiscus.com" target="_blank" rel="external">Qiscus Pte ltd</a>. All rights reserved. (Last updated: 2018-07-16)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
